# AI Agent Context: Simple Messaging App (Android)

## App Overview
- Platform: Android (Flutter)
- Purpose: Simple messaging app with QR-based chat room connection

## Minimum Working Version Features
1. Screens / Flow
   - Profile Setup Screen (First Launch)
     - Requires user to enter a username and select a profile picture
     - Shown only on first launch or when editing profile
   - Home Screen
     - Shows a list of people you have initiated chats with (recent chats)
     - Floating + button at bottom right to start a new chat
     - Settings icon/button to access Settings screen
   - Settings Screen
     - Allows user to change username and profile picture
     - Accessible from Home Screen
   - New Chat Screen
     - Option to scan a QR code (to join a chat)
     - Option to generate a QR code (to create a new chat)
     - Navigates to appropriate QR Code or Scanner screen
   - QR Code Screen
     - Displays your unique session ID as a QR code
   - QR Code Scanner Screen
     - Opens camera to scan another user's QR code
   - Chat Screen
     - Shows messages in bubbles (yours right, theirs left)
     - Text input box + send button
     - Messages stored in SQLite for persistence

2. Features
   - QR Code Generation: Use qr_flutter package
   - QR Code Scanning: Use qr_code_scanner or mobile_scanner
   - Connection: Firebase Realtime Database; scan QR to join chat room
   - Messaging: Messages stored in DB, Flutter listens for changes, updates UI
   - Persistence: Local history with sqflite (messages synced locally)

## Profile System (Simple)
- Each user has a local profile: username (display name), optional profile picture
- No authentication required (minimum version)
- Profile created/edited on first launch or via menu
- Profile data stored locally (SharedPreferences or SQLite)
- Profile info sent to chat room in Firebase when joining/starting chat
- Other user sees your profile in chat header or message bubbles
- UI: Show own profile on home screen or drawer; show other userâ€™s profile in chat

## Suggested File Structure

lib/
  main.dart
  firebase_options.dart
  screens/
    profile_setup_screen.dart
    home_screen.dart
    settings_screen.dart
    new_chat_screen.dart
    qr_code_screen.dart
    qr_scanner_screen.dart
    chat_screen.dart
  widgets/
    chat_bubble.dart
    user_avatar.dart
    chat_list_tile.dart
    profile_form.dart
  models/
    user_profile.dart
    chat_message.dart
    chat_room.dart
  services/
    firebase_service.dart
    local_db_service.dart
    qr_service.dart
    profile_service.dart
  utils/
    validators.dart
    constants.dart

## Future Tasks (for AI agents)
- Implement Home, QR Code, and Chat screens
- Integrate QR code generation and scanning
- Set up Firebase Realtime Database for chat rooms
- Implement local SQLite storage for messages
- Add simple profile creation/editing and local storage
- Sync profile info to chat room and display in UI
- Ensure all features work for Android target
